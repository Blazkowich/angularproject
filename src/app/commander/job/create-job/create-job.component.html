<!-- Control Icons -->
<control-icons style="display: block;"></control-icons>

<!-- Progress Bar -->
<div class="container mt-5">
  <div class="progress rounded-pill border border-dark" style="direction: rtl;">
    <div class="progress-bar bg-success"
         role="progressbar"
         [style.width]="progressNumber + '%'"
         [attr.aria-valuenow]="progressNumber"
         aria-valuemin="0"
         aria-valuemax="100">
      {{progressNumber}}%
    </div>
  </div>
</div>

<!-- Page 1: Basic Information -->
<div class="container mt-4" *ngIf="!isPage1Completed">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <form class="d-flex flex-column gap-3">
        <input type="text"
               class="form-control form-control-lg"
               [(ngModel)]="job.jobName"
               placeholder="Job Name"
               (input)="validateFirstPageFields()"
               name="jobName">

        <select class="form-select form-select-lg"
                [(ngModel)]="job.jobCategory"
                (change)="validateFirstPageFields()"
                name="jobCategory">
          <option value="" disabled selected>Select a job category</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>

        <select class="form-select form-select-lg"
                [(ngModel)]="job.unit"
                (change)="validateFirstPageFields()"
                name="unit">
          <option value="" disabled selected>Select a unit</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>

        <select class="form-select form-select-lg"
                [(ngModel)]="job.address"
                (change)="validateFirstPageFields()"
                name="address">
          <option value="" disabled selected>Select an address</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>

        <input type="number"
               class="form-control form-control-lg"
               [(ngModel)]="job.positions"
               placeholder="Amount of positions"
               (input)="validateFirstPageFields()"
               name="positions">

        <div class="d-flex gap-4 my-3">
          <div class="form-check">
            <input type="checkbox"
                   class="form-check-input"
                   [(ngModel)]="job.openBase"
                   (change)="validateFirstPageFields()"
                   name="openBase"
                   id="openBase">
            <label class="form-check-label" for="openBase">Open Base</label>
          </div>
          <div class="form-check">
            <input type="checkbox"
                   class="form-check-input"
                   [(ngModel)]="job.closedBase"
                   (change)="validateFirstPageFields()"
                   name="closedBase"
                   id="closedBase">
            <label class="form-check-label" for="closedBase">Closed Base</label>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Page 2: Job Description -->
<div class="container mt-4" *ngIf="isPage1Completed && !isPage2Completed">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <form class="d-flex flex-column gap-3">
        <div class="mb-3">
          <label class="form-label h6">Job Description</label>
          <textarea class="form-control"
                    rows="4"
                    [(ngModel)]="job.jobDescription"
                    placeholder="Write Job Description"
                    (input)="validateSecondPageFields()"
                    name="jobDescription"></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label h6">Additional Information</label>
          <textarea class="form-control"
                    rows="4"
                    [(ngModel)]="job.additionalInfo"
                    placeholder="Additional Information"
                    (input)="validateSecondPageFields()"
                    name="additionalInfo"></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label h6">Common Questions and Answers</label>
          <input type="text"
                 class="form-control mb-2"
                 [(ngModel)]="job.commonQuestions"
                 placeholder="Common Questions"
                 name="commonQuestions">
          <input type="text"
                 class="form-control"
                 [(ngModel)]="job.commonAnswers"
                 placeholder="Common Answers"
                 name="commonAnswers">
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Page 3: Requirements -->
<div class="container mt-4" *ngIf="isPage2Completed && !isPage3Completed">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <form class="d-flex flex-column gap-3">
        <input type="text"
               class="form-control form-control-lg"
               [(ngModel)]="job.workExperience"
               placeholder="Work Experience"
               (input)="validateThirdPageFields()"
               name="workExperience">

        <select class="form-select form-select-lg"
                [(ngModel)]="job.education"
                (change)="validateThirdPageFields()"
                name="education">
          <option value="" disabled selected>Education</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>

        <input type="text"
               class="form-control form-control-lg"
               [(ngModel)]="job.passedCourses"
               placeholder="Passed Courses"
               (input)="validateThirdPageFields()"
               name="passedCourses">

        <select class="form-select form-select-lg"
                [(ngModel)]="job.techSkills"
                (change)="validateThirdPageFields()"
                name="techSkills">
          <option value="" disabled selected>Tech Skills</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>
      </form>
    </div>
  </div>
</div>

<!-- Page 4: Summary -->
<div class="container mt-4" *ngIf="isPage3Completed">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="card">
        <div class="card-body">
          <div class="mb-4">
            <h5 class="card-title mb-3">Basic Information</h5>
            <div class="row">
              <div class="col-md-4">
                <p class="fw-bold mb-1">Job Name:</p>
                <p>{{ job.jobName }}</p>
              </div>
              <div class="col-md-4">
                <p class="fw-bold mb-1">Job Category:</p>
                <p>{{ job.jobCategory }}</p>
              </div>
              <div class="col-md-4">
                <p class="fw-bold mb-1">Vacant Positions:</p>
                <p>{{ job.positions }}</p>
              </div>
            </div>
          </div>

          <div class="mb-4">
            <h5 class="card-title mb-3">Job Details</h5>
            <p class="fw-bold mb-1">Job Description:</p>
            <p class="mb-3">{{ job.jobDescription }}</p>

            <p class="fw-bold mb-1">Work Experience:</p>
            <p class="mb-3">{{ job.workExperience }}</p>

            <p class="fw-bold mb-1">Education:</p>
            <p class="mb-3">{{ job.education }}</p>

            <p class="fw-bold mb-1">Passed Courses:</p>
            <p class="mb-3">{{ job.passedCourses }}</p>

            <p class="fw-bold mb-1">Tech Experience:</p>
            <p>{{ job.techSkills }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Navigation Buttons -->
<div class="container">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="d-flex justify-content-between mt-4 mb-5 px-3">
        <!-- First Page Next Button -->
        <button *ngIf="!isPage1Completed"
        class="btn btn-lg px-5 rounded-pill"
        [class.btn-primary]="isFirstFormValid"
        [class.btn-secondary]="!isFirstFormValid"
        [disabled]="!isFirstFormValid"
        (click)="goToSecondPage()">
          Next
        </button>

        <!-- Secon Page Next Button -->
        <button *ngIf="isPage1Completed && !isPage2Completed"
        class="btn btn-lg px-5 rounded-pill"
        [class.btn-primary]="isSecondFormValid"
        [class.btn-secondary]="!isSecondFormValid"
        [disabled]="!isSecondFormValid"
        (click)="goToThirdPage()">
          Next
        </button>

        <!-- Third Page Next Button -->
        <button *ngIf="isPage2Completed && !isPage3Completed"
                class="btn btn-lg px-5 rounded-pill"
                [class.btn-primary]="isThirdFormValid"
                [class.btn-secondary]="!isThirdFormValid"
                [disabled]="!isThirdFormValid"
                (click)="goToFourthPage()">
          Next
        </button>

        <!-- Add Button -->
        <button *ngIf="isPage3Completed"
                class="btn btn-success btn-lg px-5 rounded-pill"
                (click)="addJob()">
          Add
        </button>

        <!-- Back Button -->
        <button *ngIf="isPage1Completed"
        class="btn btn-secondary btn-lg px-5 rounded-pill"
        (click)="goBackToFirstPage()">
          Back
        </button>

        <button *ngIf="!isPage1Completed"
        class="btn btn-secondary btn-lg px-5 rounded-pill"
        (click)="goBack()">
          Back
        </button>
      </div>
    </div>
  </div>
</div>
